<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Tinynodes Angular Documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/readthedocs.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Tinynodes Angular Documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>NgxEditorJSService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>libs/ngx-editorjs/src/lib/services/editorjs.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>This handles the management of <a href="https://editorjs.io/api "> EditorJS</a> instances and their lifecycle.</p>
<p>All <code>EditorJS</code> instances are created outside of Angular using <a href="https://angular.io/api/core/NgZone "> NgZone </a> to ensure change detection is not triggered.
Once an instance is created, several <a href="https://angular.io/guide/observables "> Observable</a> values are also set up:</p>
<ul>
<li><a href="#isReady "> isReady </a> Set when the editor instance is ready in the DOM</li>
<li><a href="#hasSaved "> hasSaved </a> Set when the editor <code>.save()</code> method has been called.</li>
<li><a href="#hasChanged "> hasChanged </a> Set when a change happens, contains the <code>OutputData</code> from the Editor.</li>
</ul>
<p>After setup, <a href="#isReady "> isReady </a> is set to true and the editor can be used within Angular.  There are some methods provided
for <a href="#save "> save </a>, <a href="#update "> update </a> and <a href="#clear "> clear </a> - and an <a href="#apiCall "> apiCall </a> method which allows
for any call to be made to EditorJS that matches it&#39;s API.</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#editorMap">editorMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#hasSavedMap">hasSavedMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#isReadyMap">isReadyMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#lastChangeMap">lastChangeMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#onDestroy$">onDestroy$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#apiCall">apiCall</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#cleanupSubjects">cleanupSubjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#clear">clear</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#createInstance">createInstance</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createOnChange">createOnChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createOnReady">createOnReady</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#destroy">destroy</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#destroyInstance">destroyInstance</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getEditor">getEditor</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getTools">getTools</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasChanged">hasChanged</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasSaved">hasSaved</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isReady">isReady</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#save">save</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#setupSubjects">setupSubjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#update">update</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(editorJs: <a href="../interfaces/EditorJSClass.html">EditorJSClass</a>, config: <a href="../interfaces/NgxEditorJSModuleConfig.html">NgxEditorJSModuleConfig</a>, plugins: <a href="../injectables/NgxEditorJSPluginService.html">NgxEditorJSPluginService</a>, zone: <a href="https://angular.io/api/core/NgZone" target="_blank">NgZone</a>, ref: <a href="https://angular.io/api/core/ApplicationRef" target="_blank">ApplicationRef</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="59" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:59</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>editorJs</td>
                                                  
                                                        <td>
                                                                        <code><a href="../interfaces/EditorJSClass.html" target="_self" >EditorJSClass</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The EditorJS class injected into the application and used to create new editor instances</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>config</td>
                                                  
                                                        <td>
                                                                        <code><a href="../interfaces/NgxEditorJSModuleConfig.html" target="_self" >NgxEditorJSModuleConfig</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The configuration provided from the NgxEditorJSModule.forRoot method</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>plugins</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/NgxEditorJSPluginService.html" target="_self" >NgxEditorJSPluginService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The plugin service which provides all plugins injected into the application</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>zone</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/core/NgZone" target="_blank" >NgZone</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The Angular Zone service that allows the EditorJS methods to be run outside of Angular</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>ref</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/core/ApplicationRef" target="_blank" >ApplicationRef</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>The ApplicationRef provided by Angular, used to trigger an application tick</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="apiCall"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            apiCall
                        </b>
                        <a href="#apiCall"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>apiCall(options: <a href="../interfaces/InjectorApiCallOptions.html">InjectorApiCallOptions</a>, ...args: any[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="137"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:137</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>A helper method to make calls to the <a href="https://editorjs.io/api "> EditorJS API </a> of any instance.
The first argument is an object that you must pass the <code>method</code> name, and the <code>holder</code> ID of the container.
An optional <code>namespace</code> can be added for API calls such as <code>blocks</code>, <code>caret</code>, etc.</p>
<p>The second argument is any additional arguments as required by the API.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorApiCallOptions.html" target="_self" >InjectorApiCallOptions</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The options for the API call to be made</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>args</td>
                                    <td>
                                            <code>any[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Any arguments to be passed to the API call</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/InjectorApiCallResponse.html" target="_self" >Observable&lt;InjectorApiCallResponse&lt;T&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>An Observable of the API response</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cleanupSubjects"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            cleanupSubjects
                        </b>
                        <a href="#cleanupSubjects"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>cleanupSubjects(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="351"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:351</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Handles cleaning up all the <code>BehaviorSubject</code> values once an EditorJS instance has been destroyed</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clear"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            clear
                        </b>
                        <a href="#clear"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clear(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="190"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:190</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the EditorJS instance for the passed holder and calls the <code>clear</code> method.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createInstance"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            createInstance
                        </b>
                        <a href="#createInstance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createInstance(options: <a href="../interfaces/CreateEditorJSOptions.html">CreateEditorJSOptions</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="87"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:87</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Creates a new EditorJS instance outside of the Angular zone and then adds it to the editor instances</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/CreateEditorJSOptions.html" target="_self" >CreateEditorJSOptions</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>A configuration passed to create an EditorJS instance</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A Promise when the editor has been created</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createOnChange"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            createOnChange
                        </b>
                        <a href="#createOnChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createOnChange(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="305"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:305</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Internal method to create an default onChange method for <code>EditorJS</code></p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The InjectorMethodOption for this request</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createOnReady"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            createOnReady
                        </b>
                        <a href="#createOnReady"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createOnReady(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="320"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:320</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Internal method to create an default onReady method for <code>EditorJS</code></p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The InjectorMethodOption for this request</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="destroy"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            destroy
                        </b>
                        <a href="#destroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>destroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="295"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:295</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Call this to destroy all subscriptions within the service</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="destroyInstance"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            destroyInstance
                        </b>
                        <a href="#destroyInstance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>destroyInstance(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="275"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:275</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Destroys a single instance of EditorJS and all the subject values created for it</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEditor"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getEditor
                        </b>
                        <a href="#getEditor"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getEditor(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="231"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:231</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns the underlying EditorJS instance</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;EditorJS&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTools"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            getTools
                        </b>
                        <a href="#getTools"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTools(includeTools: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="368"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:368</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a map of tools to be initialized by the editor</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>includeTools</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>[]</code>
                                    </td>

                                    <td>
                                        <p>Optional array of tools to include, if not passed all tools</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/ToolSettingsMap.html" target="_self" >ToolSettingsMap</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasChanged"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            hasChanged
                        </b>
                        <a href="#hasChanged"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasChanged(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="253"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:253</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Subscribe to the <code>hasChanged</code> state change for the editor passed in the options</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;OutputData&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasSaved"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            hasSaved
                        </b>
                        <a href="#hasSaved"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasSaved(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="264"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:264</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Subscribe to the <code>hasSaved</code> state change for the editor passed in the options</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isReady"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            isReady
                        </b>
                        <a href="#isReady"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isReady(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="242"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:242</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Subscribe to the <code>isReady</code> state change for the editor passed in the options</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="save"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            save
                        </b>
                        <a href="#save"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>save(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="176"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:176</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Call the <code>save</code> method of an <code>EditorJS</code> instance and sets the current value of the service to the result</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options for the method call</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupSubjects"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                            setupSubjects
                        </b>
                        <a href="#setupSubjects"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupSubjects(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="338"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:338</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Sets up the <code>BehaviorSubject</code> values when an EditorJS instance is created.  All the subjects are first created and set
to default values.
Once an EditorJS instance is ready these values can provide change and save state information</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            update
                        </b>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update(options: <a href="../interfaces/InjectorMethodOption.html">InjectorMethodOption</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="212"
                            class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:212</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the EditorJS instance for the passed holder and calls the render method if blocks
are passed. Optionally can disable the <code>hasChanged</code> update - useful if doing actions
such as resetting data.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>options</td>
                                    <td>
                                                <code><a href="../interfaces/InjectorMethodOption.html" target="_self" >InjectorMethodOption</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Options to configure a method call against the EditorJS core API</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="editorMap"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Readonly</span>
                            editorMap</b>
                            <a href="#editorMap"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/EditorMap.html" target="_self" >EditorMap</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:44</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Internal map of all EditorJS instances</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="hasSavedMap"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Readonly</span>
                            hasSavedMap</b>
                            <a href="#hasSavedMap"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/SavedMap.html" target="_self" >SavedMap</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="54" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:54</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Internal map of when EditorJS save is called</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isReadyMap"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Readonly</span>
                            isReadyMap</b>
                            <a href="#isReadyMap"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/ReadyMap.html" target="_self" >ReadyMap</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:49</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Internal map of all EditorJS ready states</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lastChangeMap"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Readonly</span>
                            lastChangeMap</b>
                            <a href="#lastChangeMap"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../interfaces/ChangeMap.html" target="_self" >ChangeMap</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="59" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:59</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Internal map of all EditorJS change states</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="onDestroy$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                                <span class="modifier">Readonly</span>
                            onDestroy$</b>
                            <a href="#onDestroy$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject&lt;boolean&gt;()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">libs/ngx-editorjs/src/lib/services/editorjs.service.ts:39</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Internal destroy subject for the service</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { ApplicationRef, Inject, Injectable, NgZone } from &#x27;@angular/core&#x27;;
import EditorJS, { EditorConfig, OutputData } from &#x27;@editorjs/editorjs&#x27;;
import { BehaviorSubject, Observable, Subject } from &#x27;rxjs&#x27;;
import { filter, switchMap, take, takeUntil } from &#x27;rxjs/operators&#x27;;
import { NGX_EDITORJS_CONFIG, NgxEditorJSModuleConfig } from &#x27;../types/config&#x27;;
import { CreateEditorJSOptions } from &#x27;../types/editorjs-service&#x27;;
import {
  EditorJSClass,
  EditorJSInstance,
  InjectorApiCallOptions,
  InjectorApiCallResponse,
  InjectorMethodOption,
  MAP_DEFAULTS
} from &#x27;../types/injector&#x27;;
import { ChangeMap, EditorMap, ReadyMap, SavedMap } from &#x27;../types/maps&#x27;;
import { NgxEditorJSPluginService, ToolSettingsMap } from &#x27;@tinynodes/ngx-editorjs-plugins&#x27;;

/**
 * This handles the management of {@link https://editorjs.io/api | EditorJS} instances and their lifecycle.
 *
 * All &#x60;EditorJS&#x60; instances are created outside of Angular using {@link https://angular.io/api/core/NgZone | NgZone } to ensure change detection is not triggered.
 * Once an instance is created, several {@link https://angular.io/guide/observables | Observable} values are also set up:
 *
 *  - {@link #isReady | isReady } Set when the editor instance is ready in the DOM
 *  - {@link #hasSaved | hasSaved } Set when the editor &#x60;.save()&#x60; method has been called.
 *  - {@link #hasChanged | hasChanged } Set when a change happens, contains the &#x60;OutputData&#x60; from the Editor.
 *
 * After setup, {@link #isReady | isReady } is set to true and the editor can be used within Angular.  There are some methods provided
 * for {@link #save | save }, {@link #update | update } and {@link #clear | clear } - and an {@link #apiCall | apiCall } method which allows
 * for any call to be made to EditorJS that matches it&#x27;s API.
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class NgxEditorJSService {
  /**
   * Internal destroy subject for the service
   */
  private readonly onDestroy$ &#x3D; new Subject&lt;boolean&gt;();

  /**
   * Internal map of all EditorJS instances
   */
  private readonly editorMap: EditorMap &#x3D; {};

  /**
   * Internal map of all EditorJS ready states
   */
  private readonly isReadyMap: ReadyMap &#x3D; {};

  /**
   * Internal map of when EditorJS save is called
   */
  private readonly hasSavedMap: SavedMap &#x3D; {};

  /**
   * Internal map of all EditorJS change states
   */
  private readonly lastChangeMap: ChangeMap &#x3D; {};


  /**
   * @param editorJs The EditorJS class injected into the application and used to create new editor instances
   * @param config The configuration provided from the NgxEditorJSModule.forRoot method
   * @param plugins The plugin service which provides all plugins injected into the application
   * @param zone The Angular Zone service that allows the EditorJS methods to be run outside of Angular
   * @param ref The ApplicationRef provided by Angular, used to trigger an application tick
   */
  constructor(
    @Inject(EditorJSInstance) private readonly editorJs: EditorJSClass,
    @Inject(NGX_EDITORJS_CONFIG) private readonly config: NgxEditorJSModuleConfig,
    private readonly plugins: NgxEditorJSPluginService,
    private readonly zone: NgZone,
    private readonly ref: ApplicationRef
  ) {
  }

  /**
   * Creates a new EditorJS instance outside of the Angular zone and then adds it to the editor instances
   *
   * @remark
   * This method uses &#x60;async/await&#x60;
   *
   * @param options A configuration passed to create an EditorJS instance
   * @returns A Promise when the editor has been created
   */
  public async createInstance(options: CreateEditorJSOptions): Promise&lt;void&gt; {
    const editorConfig: EditorConfig &#x3D; {
      ...this.config.editorjs,
      ...options.config,
      tools: this.getTools(options.includeTools)
    };

    // Bind the editor onChange method from the config, otherwise use the local createOnChange method
    editorConfig.onChange &#x3D; (editorConfig.onChange &amp;&amp; typeof editorConfig.onChange &#x3D;&#x3D;&#x3D; &#x27;function&#x27;
      ? editorConfig.onChange
      : this.createOnChange.call(this, { holder: editorConfig.holder as string }));

    // Bind the editor onReady method from the config, otherwise use the local createOnReady method
    editorConfig.onReady &#x3D;
      editorConfig.onReady &amp;&amp; typeof editorConfig.onReady &#x3D;&#x3D;&#x3D; &#x27;function&#x27;
        ? editorConfig.onReady
        : this.createOnReady.call(this, { holder: editorConfig.holder as string });

    await this.zone.runOutsideAngular(async () &#x3D;&gt; {
      const editor &#x3D; new this.editorJs(editorConfig);
      const holder &#x3D; editorConfig.holder as string;
      await editor.isReady;
      await this.zone.run(async () &#x3D;&gt; {
        await this.setupSubjects({ holder });
        if (this.editorMap[holder]) {
          this.editorMap[holder].next(editor);
        } else {
          this.editorMap[holder] &#x3D; new BehaviorSubject&lt;EditorJS&gt;(editor);
        }
        this.isReadyMap[holder].next(true);
        this.ref.tick();
      });
    });
  }

  /**
   * A helper method to make calls to the {@link https://editorjs.io/api | EditorJS API } of any instance.
   * The first argument is an object that you must pass the &#x60;method&#x60; name, and the &#x60;holder&#x60; ID of the container.
   * An optional &#x60;namespace&#x60; can be added for API calls such as &#x60;blocks&#x60;, &#x60;caret&#x60;, etc.
   *
   * The second argument is any additional arguments as required by the API.
   *
   * @remarks
   * Unlike other methods an API call be made with a &#x60;.subscribe&#x60;, the result will be an observable value.
   * If the value is a Promise it will be resolved first
   *
   * @param options The options for the API call to be made
   * @param args Any arguments to be passed to the API call
   * @returns An Observable of the API response
   */
  public apiCall&lt;T &#x3D; any&gt;(options: InjectorApiCallOptions, ...args: any[]): Observable&lt;InjectorApiCallResponse&lt;T&gt;&gt; {
    return this.getEditor(options).pipe(
      take(1),
      switchMap(editor &#x3D;&gt; {
        const apiResult &#x3D; new BehaviorSubject&lt;InjectorApiCallResponse&lt;T&gt;&gt;({ ...options, result: {} as T });

        this.zone.runOutsideAngular(() &#x3D;&gt; {
          let method: any;
          if (!options.namespace) {
            method &#x3D; editor[options.method];
          } else {
            method &#x3D; editor[options.namespace][options.method];
          }
          if (!method) {
            throw new Error(&#x60;No method ${ options.method } ${ options.namespace ? &#x27;in &#x27; + options.namespace : &#x27;&#x27; }&#x60;);
          }
          const result &#x3D; method.call(editor, ...args);
          this.zone.run(() &#x3D;&gt; {
            if (!result || (result &amp;&amp; !result.then)) {
              apiResult.next({
                ...options,
                result: typeof result &#x3D;&#x3D;&#x3D; &#x27;undefined&#x27; ? {} : result
              });
            } else {
              result.then((r: T) &#x3D;&gt; {
                apiResult.next({ ...options, result: r });
              });
            }
          });
        });
        return apiResult.asObservable();
      })
    );
  }

  /**
   * Call the &#x60;save&#x60; method of an &#x60;EditorJS&#x60; instance and sets the current value of the service to the result
   * @param options Options for the method call
   */
  public save(options: InjectorMethodOption): void {
    this.apiCall({ holder: options.holder, namespace: &#x27;saver&#x27;, method: &#x27;save&#x27; }, options.data)
      .pipe(take(1))
      .subscribe((response: InjectorApiCallResponse&lt;OutputData&gt;) &#x3D;&gt; {
          this.hasSavedMap[options.holder].next(true);
          this.lastChangeMap[options.holder].next(response.result);
        }
      );
  }

  /**
   * Gets the EditorJS instance for the passed holder and calls the &#x60;clear&#x60; method.
   * @param options Options to configure a method call against the EditorJS core API
   */
  public clear(options: InjectorMethodOption): void {
    this.apiCall({ holder: options.holder, namespace: &#x27;blocks&#x27;, method: &#x27;clear&#x27; })
      .pipe(take(1))
      .subscribe((response: InjectorApiCallResponse&lt;OutputData&gt;) &#x3D;&gt; {
        this.hasSavedMap[options.holder].next(false);
        this.lastChangeMap[options.holder].next({
          time: Date.now(),
          blocks: [ {
            type: &#x27;paragraph&#x27;,
            data: { text: &#x27;&#x27; }
          } ],
          version: this.editorJs.version
        });
      });
  }

  /**
   * Gets the EditorJS instance for the passed holder and calls the render method if blocks
   * are passed. Optionally can disable the &#x60;hasChanged&#x60; update - useful if doing actions
   * such as resetting data.
   * @param options Options to configure a method call against the EditorJS core API
   */
  public update(options: InjectorMethodOption): void {
    if (!options.data) {
      return;
    }
    const data &#x3D; {
      time: Date.now(),
      version: this.editorJs.version,
      blocks: [],
      ...options.data
    };
    this.apiCall({ holder: options.holder, namespace: &#x27;blocks&#x27;, method: &#x27;render&#x27; }, data).subscribe(() &#x3D;&gt; {
      this.lastChangeMap[options.holder].next(data);
    });
  }

  /**
   * Returns the underlying EditorJS instance
   * @param options Options to configure a method call against the EditorJS core API
   */
  public getEditor(options: InjectorMethodOption): Observable&lt;EditorJS&gt; {
    if (!this.editorMap[options.holder]) {
      this.editorMap[options.holder] &#x3D; new BehaviorSubject&lt;EditorJS | undefined&gt;(undefined);
    }
    return this.editorMap[options.holder].pipe(filter(editor &#x3D;&gt; typeof editor !&#x3D;&#x3D; &#x27;undefined&#x27;));
  }

  /**
   * Subscribe to the &#x60;isReady&#x60; state change for the editor passed in the options
   * @param options Options to configure a method call against the EditorJS core API
   */
  public isReady(options: InjectorMethodOption): Observable&lt;boolean&gt; {
    if (!this.isReadyMap[options.holder]) {
      this.isReadyMap[options.holder] &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
    }
    return this.isReadyMap[options.holder].asObservable();
  }

  /**
   * Subscribe to the &#x60;hasChanged&#x60; state change for the editor passed in the options
   * @param options Options to configure a method call against the EditorJS core API
   */
  public hasChanged(options: InjectorMethodOption): Observable&lt;OutputData&gt; {
    if (!this.lastChangeMap[options.holder]) {
      this.lastChangeMap[options.holder] &#x3D; new BehaviorSubject&lt;OutputData&gt;({ time: 0, blocks: [] });
    }
    return this.lastChangeMap[options.holder].asObservable();
  }

  /**
   * Subscribe to the &#x60;hasSaved&#x60; state change for the editor passed in the options
   * @param options Options to configure a method call against the EditorJS core API
   */
  public hasSaved(options: InjectorMethodOption): Observable&lt;boolean&gt; {
    if (!this.hasSavedMap[options.holder]) {
      this.hasSavedMap[options.holder] &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
    }
    return this.hasSavedMap[options.holder].asObservable();
  }

  /**
   * Destroys a single instance of EditorJS and all the subject values created for it
   * @param options Options to configure a method call against the EditorJS core API
   */
  public destroyInstance(options: InjectorMethodOption): void {
    const instanceDestroyed &#x3D; new Subject&lt;boolean&gt;();
    this.getEditor(options)
      .pipe(takeUntil(instanceDestroyed))
      .subscribe(editor &#x3D;&gt; {
        this.zone.runOutsideAngular(() &#x3D;&gt; {
          editor.destroy();
          this.zone.run(() &#x3D;&gt; {
            this.cleanupSubjects({ holder: options.holder });
            instanceDestroyed.next(true);
            instanceDestroyed.complete();
            this.ref.tick();
          });
        });
      });
  }

  /**
   * Call this to destroy all subscriptions within the service
   */
  public destroy() {
    Object.keys(this.editorMap).forEach(holder &#x3D;&gt; this.destroyInstance({ holder }));
    this.onDestroy$.next(true);
    this.onDestroy$.complete();
  }

  /**
   * Internal method to create an default onChange method for &#x60;EditorJS&#x60;
   * @param options The InjectorMethodOption for this request
   */
  private createOnChange(options: InjectorMethodOption): (change: OutputData) &#x3D;&gt; void {
    if (!this.lastChangeMap[options.holder]) {
      this.lastChangeMap[options.holder] &#x3D; new BehaviorSubject&lt;OutputData&gt;({ blocks: [] });
    }
    return (change: OutputData) &#x3D;&gt; {
      if (change) {
        this.lastChangeMap[options.holder].next(change);
      }
    };
  }

  /**
   * Internal method to create an default onReady method for &#x60;EditorJS&#x60;
   * @param options The InjectorMethodOption for this request
   */
  private createOnReady(options: InjectorMethodOption): () &#x3D;&gt; void {
    if (!this.isReadyMap[options.holder]) {
      this.isReadyMap[options.holder] &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
    }

    return () &#x3D;&gt; {
      if (!this.isReadyMap[options.holder].value) {
        this.isReadyMap[options.holder].next(true);
      }
    };
  }

  /**
   * Sets up the &#x60;BehaviorSubject&#x60; values when an EditorJS instance is created.  All the subjects are first created and set
   * to default values.
   * Once an EditorJS instance is ready these values can provide change and save state information
   * @param options Options to configure a method call against the EditorJS core API
   */
  private async setupSubjects(options: InjectorMethodOption): Promise&lt;void&gt; {
    MAP_DEFAULTS.forEach(([ mapKey, value ]: [ string, typeof value ]) &#x3D;&gt; {
      if (!this[mapKey][options.holder]) {
        this[mapKey][options.holder] &#x3D; new BehaviorSubject&lt;typeof value&gt;(value);
      }
      this[mapKey][options.holder].next(value);
    });
  }

  /**
   * Handles cleaning up all the &#x60;BehaviorSubject&#x60; values once an EditorJS instance has been destroyed
   * @param holder The holder ID for the EditorJS instance
   */
  private cleanupSubjects(options: InjectorMethodOption) {
    MAP_DEFAULTS.forEach(([ mapKey, value ]: [ string, any ]) &#x3D;&gt; {
      if (this[mapKey][options.holder]) {
        this[mapKey][options.holder].next(value);
        this[mapKey][options.holder].complete();
        this[mapKey][options.holder] &#x3D; null;
        delete this[mapKey][options.holder];
      }
    });
    this.editorMap[options.holder] &#x3D; null;
    delete this.editorMap[options.holder];
  }

  /**
   * Returns a map of tools to be initialized by the editor
   * @param includeTools Optional array of tools to include, if not passed all tools
   */
  private getTools(includeTools: string[] &#x3D; []): ToolSettingsMap {

    return Object.entries(this.plugins.getPlugins())
      .filter(([ key ]) &#x3D;&gt; (includeTools.length &gt; 0 &amp;&amp; includeTools.includes(key)) || true)
      .reduce(
        (finalTools, [ key, plugin ]) &#x3D;&gt;
          plugin.shortcut
            ? {
              [key]: {
                class: plugin.plugin,
                shortcut: plugin.shortcut
              },
              ...finalTools
            }
            : { [key]: plugin.plugin, ...finalTools },
        {}
      );
  }
}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ngx-editorjs-plugins-changelog.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
